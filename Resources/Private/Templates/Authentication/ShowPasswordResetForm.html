<f:layout name="Default"/>
<f:section name="main">

  <f:flashMessages />

  <f:render partial="Form/ValidationErrors"/>

<f:if condition="{hash}">
  <f:then>

    <f:form
      action="completePasswordReset"
      class="password-reset form-inline">

      <f:form.hidden name="hash" value="{hash}"/>

      <f:render partial="Form/TextField" arguments="{
        fieldName: 'password',
        fieldType: 'password',
        translationKey: 'password',
        defaultLabel: 'Password',
        additionalAttributes: {
          autocomplete: 'new-password',
          data-rsa-encryption: ''
        }
      }"/>

      <f:render partial="Form/TextField" arguments="{
        fieldName: 'passwordRepeat',
        fieldType: 'password',
        translationKey: 'passwordRepeat',
        defaultLabel: 'Repeat password',
        additionalAttributes: {
          autocomplete: 'new-password',
          data-rsa-encryption: ''
        }
      }"/>

      <f:render partial="Form/SubmitButton" arguments="{
        translationKey: 'action.changePassword',
        defaultLabel: 'Change password'
      }"/>

    </f:form>

  </f:then>
  <f:else>

    <f:form
      action="startPasswordReset"
      class="password-reset form-inline">

      <f:render partial="Form/TextField" arguments="{
        fieldName: 'username',
        fieldType: 'text',
        translationKey: 'username',
        defaultLabel: 'Username',
        additionalAttributes: {
          autocomplete: 'username'
        },
        inline: true
      }"/>

      <f:render partial="Form/SubmitButton" arguments="{
        translationKey: 'action.resetPassword',
        defaultLabel: 'Reset password'
      }"/>

      <p>
        <f:link.action
          action="showLoginForm"
          pageUid="{settings.login.page}">
          <f:translate key="action.backToLogin">Back to login</f:translate>
        </f:link.action>
      </p>

    </f:form>

  </f:else>
</f:if>

</f:section>
